{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vatsl\\\\OneDrive\\\\Desktop\\\\CAS - Copy\\\\cas-frontend\\\\src\\\\pages\\\\PatientDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom'; // Import useNavigate\nimport AppointmentList from '../components/AppointmentList';\nimport EditAppointmentModal from '../components/EditAppointmentModal';\nimport '../styles/dashboard.css';\nimport '../styles/main.css';\nimport '../styles/modal.css';\n\n// Mock Availability Data (needed for EditAppointmentModal validation)\n// TODO: Refactor mock data into a shared location or fetch dynamically if needed\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultAvailability = {\n  Monday: {\n    startTime: \"09:00\",\n    endTime: \"13:00\",\n    isAvailable: true\n  },\n  Tuesday: {\n    startTime: \"09:00\",\n    endTime: \"13:00\",\n    isAvailable: true\n  },\n  Wednesday: {\n    startTime: \"09:00\",\n    endTime: \"13:00\",\n    isAvailable: true\n  },\n  Thursday: {\n    startTime: \"09:00\",\n    endTime: \"13:00\",\n    isAvailable: true\n  },\n  Friday: {\n    startTime: \"09:00\",\n    endTime: \"13:00\",\n    isAvailable: true\n  },\n  Saturday: {\n    startTime: \"10:00\",\n    endTime: \"12:00\",\n    isAvailable: false\n  },\n  Sunday: {\n    startTime: \"\",\n    endTime: \"\",\n    isAvailable: false\n  }\n};\nconst mockDoctorAvailability = {\n  1: {\n    ...defaultAvailability\n  },\n  // Dr. Smith\n  2: {\n    // Dr. Johnson\n    ...defaultAvailability,\n    Wednesday: {\n      startTime: \"14:00\",\n      endTime: \"18:00\",\n      isAvailable: true\n    },\n    Friday: {\n      startTime: \"\",\n      endTime: \"\",\n      isAvailable: false\n    }\n  },\n  3: {\n    ...defaultAvailability\n  } // Dr. Williams\n};\nfunction PatientDashboard() {\n  _s();\n  const [appointments, setAppointments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate(); // Initialize useNavigate\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [appointmentToEdit, setAppointmentToEdit] = useState(null);\n  useEffect(() => {\n    const fetchAppointments = async () => {\n      setLoading(true);\n      setError(''); // Clear previous errors\n      const token = localStorage.getItem('token');\n      const userType = localStorage.getItem('userType');\n\n      // Authorization Check: Must be logged in AND be a patient\n      if (!token || userType !== 'patient') {\n        console.error(\"Authorization Error: User is not a logged-in patient.\");\n        navigate('/access-denied'); // Redirect if not authorized\n        return; // Stop further execution in this effect\n      }\n      try {\n        const response = await fetch('http://localhost:5001/api/appointments/patient', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        // Add doctorId to fetched data if backend doesn't include it but modal needs it\n        // (Assuming backend returns doctorId now based on model)\n        setAppointments(data);\n      } catch (err) {\n        console.error('Error fetching appointments:', err);\n        setError(err.message || 'Failed to load appointments.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAppointments();\n  }, []); // Empty dependency array means run once on mount\n\n  const handleCancel = async appointmentId => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError(\"Authentication required to cancel.\");\n      return;\n    }\n\n    // Optional: Confirm before cancelling\n    if (!window.confirm(\"Are you sure you want to cancel this appointment?\")) {\n      return;\n    }\n    setError(''); // Clear previous errors\n    try {\n      const response = await fetch(`http://localhost:5001/api/appointments/${appointmentId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const result = await response.json();\n      if (!response.ok) {\n        throw new Error(result.error || `HTTP error! status: ${response.status}`);\n      }\n\n      // Update state to reflect cancellation (change status or remove)\n      // Option 1: Change status locally\n      setAppointments(prevAppointments => prevAppointments.map(app => app.id === appointmentId ? {\n        ...app,\n        status: 'cancelled'\n      } : app));\n      // Option 2: Remove from list locally (if you prefer not to show cancelled ones)\n      // setAppointments(prevAppointments => prevAppointments.filter(a => a.id !== appointmentId));\n\n      alert(result.message || \"Appointment cancelled successfully.\");\n    } catch (err) {\n      console.error('Error cancelling appointment:', err);\n      setError(err.message || 'Failed to cancel appointment.');\n    }\n  };\n\n  // --- Edit Modal Handlers ---\n  const handleEditRequest = appointment => {\n    console.log(\"Editing appointment:\", appointment);\n    // Ensure we have doctorId on the appointment object\n    if (!appointment.doctorId) {\n      console.error(\"Cannot edit appointment: doctorId is missing.\", appointment);\n      setError(\"Cannot edit this appointment: missing doctor information.\");\n      return;\n    }\n    setAppointmentToEdit(appointment);\n    setIsEditModalOpen(true);\n  };\n  const handleCloseEditModal = () => {\n    setIsEditModalOpen(false);\n    setAppointmentToEdit(null);\n  };\n  const handleUpdateAppointment = updatedData => {\n    // updatedData should contain { id, date, time }\n    console.log(\"Updating appointment (mock):\", updatedData);\n    // TODO: Implement API call (PUT /api/appointments/:id)\n    setAppointments(prevAppointments => prevAppointments.map(app => app.id === updatedData.id ? {\n      ...app,\n      date: updatedData.date,\n      time: updatedData.time\n    } : app));\n    handleCloseEditModal();\n    alert(\"Appointment rescheduled (mock)!\");\n  };\n  // --- End Edit Modal Handlers ---\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading appointments...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-page page-container\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"My Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-section-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Upcoming & Past Appointments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/doctors\",\n            className: \"btn btn-primary\",\n            children: \"Book New Appointment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AppointmentList, {\n          appointments: appointments,\n          onCancel: handleCancel,\n          onEditRequest: handleEditRequest,\n          userType: \"patient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditAppointmentModal, {\n        isOpen: isEditModalOpen,\n        appointment: appointmentToEdit\n        // Pass the correct availability schedule based on the doctorId of the appointment being edited\n        ,\n        doctorAvailability: appointmentToEdit ? mockDoctorAvailability[appointmentToEdit.doctorId] || defaultAvailability : null,\n        onUpdate: handleUpdateAppointment,\n        onClose: handleCloseEditModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this) // Close dashboard-page\n  ;\n}\n_s(PatientDashboard, \"ubFyeW3b3CtbfdA9GRZLdH9YG4o=\", false, function () {\n  return [useNavigate];\n});\n_c = PatientDashboard;\nexport default PatientDashboard;\nvar _c;\n$RefreshReg$(_c, \"PatientDashboard\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","AppointmentList","EditAppointmentModal","jsxDEV","_jsxDEV","defaultAvailability","Monday","startTime","endTime","isAvailable","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","mockDoctorAvailability","PatientDashboard","_s","appointments","setAppointments","loading","setLoading","error","setError","navigate","isEditModalOpen","setIsEditModalOpen","appointmentToEdit","setAppointmentToEdit","fetchAppointments","token","localStorage","getItem","userType","console","response","fetch","headers","ok","errorData","json","Error","status","data","err","message","handleCancel","appointmentId","window","confirm","method","result","prevAppointments","map","app","id","alert","handleEditRequest","appointment","log","doctorId","handleCloseEditModal","handleUpdateAppointment","updatedData","date","time","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","onCancel","onEditRequest","isOpen","doctorAvailability","onUpdate","onClose","_c","$RefreshReg$"],"sources":["C:/Users/vatsl/OneDrive/Desktop/CAS - Copy/cas-frontend/src/pages/PatientDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom'; // Import useNavigate\r\nimport AppointmentList from '../components/AppointmentList';\r\nimport EditAppointmentModal from '../components/EditAppointmentModal';\r\nimport '../styles/dashboard.css';\r\nimport '../styles/main.css';\r\nimport '../styles/modal.css';\r\n\r\n// Mock Availability Data (needed for EditAppointmentModal validation)\r\n// TODO: Refactor mock data into a shared location or fetch dynamically if needed\r\nconst defaultAvailability = {\r\n  Monday:    { startTime: \"09:00\", endTime: \"13:00\", isAvailable: true },\r\n  Tuesday:   { startTime: \"09:00\", endTime: \"13:00\", isAvailable: true },\r\n  Wednesday: { startTime: \"09:00\", endTime: \"13:00\", isAvailable: true },\r\n  Thursday:  { startTime: \"09:00\", endTime: \"13:00\", isAvailable: true },\r\n  Friday:    { startTime: \"09:00\", endTime: \"13:00\", isAvailable: true },\r\n  Saturday:  { startTime: \"10:00\", endTime: \"12:00\", isAvailable: false },\r\n  Sunday:    { startTime: \"\",      endTime: \"\",      isAvailable: false },\r\n};\r\nconst mockDoctorAvailability = {\r\n  1: { ...defaultAvailability }, // Dr. Smith\r\n  2: { // Dr. Johnson\r\n    ...defaultAvailability,\r\n    Wednesday: { startTime: \"14:00\", endTime: \"18:00\", isAvailable: true },\r\n    Friday:    { startTime: \"\", endTime: \"\", isAvailable: false },\r\n  },\r\n  3: { ...defaultAvailability }, // Dr. Williams\r\n};\r\n\r\n\r\nfunction PatientDashboard() {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate(); // Initialize useNavigate\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [appointmentToEdit, setAppointmentToEdit] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchAppointments = async () => {\r\n      setLoading(true);\r\n      setError(''); // Clear previous errors\r\n      const token = localStorage.getItem('token');\r\n      const userType = localStorage.getItem('userType');\r\n\r\n      // Authorization Check: Must be logged in AND be a patient\r\n      if (!token || userType !== 'patient') {\r\n        console.error(\"Authorization Error: User is not a logged-in patient.\");\r\n        navigate('/access-denied'); // Redirect if not authorized\r\n        return; // Stop further execution in this effect\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:5001/api/appointments/patient', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        // Add doctorId to fetched data if backend doesn't include it but modal needs it\r\n        // (Assuming backend returns doctorId now based on model)\r\n        setAppointments(data);\r\n\r\n      } catch (err) {\r\n        console.error('Error fetching appointments:', err);\r\n        setError(err.message || 'Failed to load appointments.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAppointments();\r\n  }, []); // Empty dependency array means run once on mount\r\n\r\n  const handleCancel = async (appointmentId) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setError(\"Authentication required to cancel.\");\r\n      return;\r\n    }\r\n\r\n    // Optional: Confirm before cancelling\r\n    if (!window.confirm(\"Are you sure you want to cancel this appointment?\")) {\r\n      return;\r\n    }\r\n\r\n    setError(''); // Clear previous errors\r\n    try {\r\n      const response = await fetch(`http://localhost:5001/api/appointments/${appointmentId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || `HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      // Update state to reflect cancellation (change status or remove)\r\n      // Option 1: Change status locally\r\n      setAppointments(prevAppointments =>\r\n        prevAppointments.map(app =>\r\n          app.id === appointmentId ? { ...app, status: 'cancelled' } : app\r\n        )\r\n      );\r\n      // Option 2: Remove from list locally (if you prefer not to show cancelled ones)\r\n      // setAppointments(prevAppointments => prevAppointments.filter(a => a.id !== appointmentId));\r\n\r\n      alert(result.message || \"Appointment cancelled successfully.\");\r\n\r\n    } catch (err) {\r\n      console.error('Error cancelling appointment:', err);\r\n      setError(err.message || 'Failed to cancel appointment.');\r\n    }\r\n  };\r\n\r\n  // --- Edit Modal Handlers ---\r\n  const handleEditRequest = (appointment) => {\r\n    console.log(\"Editing appointment:\", appointment);\r\n    // Ensure we have doctorId on the appointment object\r\n    if (!appointment.doctorId) {\r\n        console.error(\"Cannot edit appointment: doctorId is missing.\", appointment);\r\n        setError(\"Cannot edit this appointment: missing doctor information.\");\r\n        return;\r\n    }\r\n    setAppointmentToEdit(appointment);\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleCloseEditModal = () => {\r\n    setIsEditModalOpen(false);\r\n    setAppointmentToEdit(null);\r\n  };\r\n\r\n  const handleUpdateAppointment = (updatedData) => {\r\n    // updatedData should contain { id, date, time }\r\n    console.log(\"Updating appointment (mock):\", updatedData);\r\n    // TODO: Implement API call (PUT /api/appointments/:id)\r\n    setAppointments(prevAppointments =>\r\n      prevAppointments.map(app =>\r\n        app.id === updatedData.id\r\n          ? { ...app, date: updatedData.date, time: updatedData.time }\r\n          : app\r\n      )\r\n    );\r\n    handleCloseEditModal();\r\n    alert(\"Appointment rescheduled (mock)!\");\r\n  };\r\n  // --- End Edit Modal Handlers ---\r\n\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading appointments...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-page page-container\"> {/* Added page-container */}\r\n      <div className=\"container\"> {/* Added container */}\r\n        <div className=\"dashboard-header\">\r\n          <h2>My Dashboard</h2>\r\n        </div>\r\n\r\n        {/* Display error if any */}\r\n        {error && <div className=\"alert alert-danger\">{error}</div>}\r\n\r\n        <div className=\"dashboard-section\">\r\n          <div className=\"dashboard-section-header\">\r\n            <h3>Upcoming & Past Appointments</h3>\r\n            <Link to=\"/doctors\" className=\"btn btn-primary\">\r\n              Book New Appointment\r\n            </Link>\r\n          </div>\r\n          <AppointmentList\r\n            appointments={appointments}\r\n            onCancel={handleCancel}\r\n            onEditRequest={handleEditRequest}\r\n            userType=\"patient\"\r\n          />\r\n        </div>\r\n\r\n        {/* Render the Edit Modal */}\r\n        <EditAppointmentModal\r\n          isOpen={isEditModalOpen}\r\n          appointment={appointmentToEdit}\r\n          // Pass the correct availability schedule based on the doctorId of the appointment being edited\r\n          doctorAvailability={appointmentToEdit ? (mockDoctorAvailability[appointmentToEdit.doctorId] || defaultAvailability) : null}\r\n          onUpdate={handleUpdateAppointment}\r\n          onClose={handleCloseEditModal}\r\n        />\r\n      </div> {/* Close container */}\r\n    </div> // Close dashboard-page\r\n  );\r\n}\r\n\r\nexport default PatientDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}