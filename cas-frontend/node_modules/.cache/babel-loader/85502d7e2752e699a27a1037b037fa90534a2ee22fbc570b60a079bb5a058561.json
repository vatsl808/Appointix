{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vatsl\\\\OneDrive\\\\Desktop\\\\CAS - Copy\\\\cas-frontend\\\\src\\\\components\\\\AvailabilityModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react'; // Import useRef\nimport { FaClock } from 'react-icons/fa'; // Import the clock icon\nimport '../styles/modal.css';\nimport '../styles/availability.css'; // Ensure this is imported\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst daysOfWeek = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\nfunction AvailabilityModal({\n  isOpen,\n  currentAvailability,\n  onUpdate,\n  onClose\n}) {\n  _s();\n  const [schedule, setSchedule] = useState({});\n  const timeInputRefs = useRef({}); // Ref to hold refs for all time inputs\n\n  // Initialize local state when the modal opens or availability data changes\n  useEffect(() => {\n    if (currentAvailability) {\n      // Initialize refs object when component mounts or isOpen changes\n      timeInputRefs.current = {};\n      daysOfWeek.forEach(day => {\n        timeInputRefs.current[`start-${day}`] = /*#__PURE__*/React.createRef();\n        timeInputRefs.current[`end-${day}`] = /*#__PURE__*/React.createRef();\n      });\n      if (currentAvailability) {\n        setSchedule(JSON.parse(JSON.stringify(currentAvailability))); // Deep copy\n      } else {\n        // Ensure schedule is initialized if currentAvailability is null/undefined initially\n        const initialSchedule = {};\n        daysOfWeek.forEach(day => {\n          initialSchedule[day] = {\n            startTime: '',\n            endTime: '',\n            isAvailable: false\n          };\n        });\n        setSchedule(initialSchedule);\n      }\n    }\n  }, [currentAvailability, isOpen]); // Re-initialize if the prop changes while open or modal opens\n\n  const handleCheckboxChange = (day, checked) => {\n    setSchedule(prev => ({\n      ...prev,\n      [day]: {\n        ...prev[day],\n        isAvailable: checked\n      }\n    }));\n  };\n  const handleTimeChange = (day, timeType, value) => {\n    setSchedule(prev => ({\n      ...prev,\n      [day]: {\n        ...prev[day],\n        [timeType]: value\n      }\n    }));\n  };\n\n  // Function to trigger the time picker\n  const handleIconClick = (day, timeType) => {\n    var _schedule$day;\n    const key = `${timeType}-${day}`;\n    const inputRef = timeInputRefs.current[key];\n    // Check if the day is available in the current schedule state\n    const dayIsAvailable = ((_schedule$day = schedule[day]) === null || _schedule$day === void 0 ? void 0 : _schedule$day.isAvailable) || false;\n    if (dayIsAvailable && inputRef && inputRef.current) {\n      // Only attempt to trigger click if the day is available (input is enabled)\n      try {\n        // Programmatically click the input element\n        inputRef.current.click();\n      } catch (error) {\n        console.error(\"Failed to programmatically click input:\", error);\n        // Fallback: focus the input as a last resort\n        inputRef.current.focus();\n      }\n    } else if (!dayIsAvailable) {\n      // Optional: Log or provide feedback that the picker can't be opened because the day is unavailable\n      console.log(`Time picker for ${day} (${timeType}) cannot be opened as the day is marked unavailable.`);\n    }\n  };\n  const handleSubmit = async e => {\n    // Make async\n    e.preventDefault();\n    console.log(\"Attempting to save schedule from modal:\", schedule);\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Handle error - maybe show message in modal or rely on parent\n      console.error(\"Authentication token not found.\");\n      alert(\"Authentication error. Please log in again.\");\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:5001/api/doctors/me/availability', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(schedule) // Send the entire schedule object\n      });\n      const result = await response.json();\n      if (!response.ok) {\n        throw new Error(result.error || `HTTP error! status: ${response.status}`);\n      }\n\n      // Call parent's onUpdate handler ONLY on successful API call\n      onUpdate(schedule); // Pass the updated schedule back to update parent state\n      // onClose(); // onUpdate now handles closing in parent\n\n      alert(result.message || \"Availability updated successfully!\"); // Give feedback\n    } catch (err) {\n      console.error(\"Error updating availability:\", err);\n      // TODO: Display error message within the modal\n      alert(`Error updating availability: ${err.message}`);\n    }\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `modal-backdrop ${isOpen ? 'open' : ''}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-container availability-modal-container\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Set Weekly Availability\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"modal-close-btn\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body availability-modal-body\",\n          children: daysOfWeek.map(day => {\n            var _schedule$day2, _schedule$day3, _schedule$day4, _schedule$day5, _schedule$day6, _schedule$day7, _schedule$day8, _schedule$day9;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"availability-day-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"day-label\",\n                children: day\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"day-controls\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  id: `available-${day}`,\n                  checked: ((_schedule$day2 = schedule[day]) === null || _schedule$day2 === void 0 ? void 0 : _schedule$day2.isAvailable) || false,\n                  onChange: e => handleCheckboxChange(day, e.target.checked),\n                  className: \"availability-checkbox\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: `available-${day}`,\n                  className: \"availability-toggle-label\",\n                  children: (_schedule$day3 = schedule[day]) !== null && _schedule$day3 !== void 0 && _schedule$day3.isAvailable ? 'Available' : 'Unavailable'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time-inputs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"time-input-wrapper\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"time\",\n                      id: `start-${day}`,\n                      value: ((_schedule$day4 = schedule[day]) === null || _schedule$day4 === void 0 ? void 0 : _schedule$day4.startTime) || '',\n                      onChange: e => handleTimeChange(day, 'startTime', e.target.value),\n                      disabled: !((_schedule$day5 = schedule[day]) !== null && _schedule$day5 !== void 0 && _schedule$day5.isAvailable),\n                      className: \"form-control time-input\",\n                      required: (_schedule$day6 = schedule[day]) === null || _schedule$day6 === void 0 ? void 0 : _schedule$day6.isAvailable // Require time if available\n                      ,\n                      ref: timeInputRefs.current[`start-${day}`] // Assign ref\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"time-input-icon-clickable\",\n                      onClick: () => handleIconClick(day, 'start'),\n                      children: /*#__PURE__*/_jsxDEV(FaClock, {\n                        className: \"time-input-icon\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" - \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"time-input-wrapper\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"time\",\n                      id: `end-${day}`,\n                      value: ((_schedule$day7 = schedule[day]) === null || _schedule$day7 === void 0 ? void 0 : _schedule$day7.endTime) || '',\n                      onChange: e => handleTimeChange(day, 'endTime', e.target.value),\n                      disabled: !((_schedule$day8 = schedule[day]) !== null && _schedule$day8 !== void 0 && _schedule$day8.isAvailable),\n                      className: \"form-control time-input\",\n                      required: (_schedule$day9 = schedule[day]) === null || _schedule$day9 === void 0 ? void 0 : _schedule$day9.isAvailable // Require time if available\n                      ,\n                      ref: timeInputRefs.current[`end-${day}`] // Assign ref\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"time-input-icon-clickable\",\n                      onClick: () => handleIconClick(day, 'end'),\n                      children: /*#__PURE__*/_jsxDEV(FaClock, {\n                        className: \"time-input-icon\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 171,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 24\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this)]\n            }, day, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Save Availability\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"btn btn-secondary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(AvailabilityModal, \"MHj248PdqjA7fFfk+2kZGdAH1sg=\");\n_c = AvailabilityModal;\nexport default AvailabilityModal;\nvar _c;\n$RefreshReg$(_c, \"AvailabilityModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","FaClock","jsxDEV","_jsxDEV","daysOfWeek","AvailabilityModal","isOpen","currentAvailability","onUpdate","onClose","_s","schedule","setSchedule","timeInputRefs","current","forEach","day","createRef","JSON","parse","stringify","initialSchedule","startTime","endTime","isAvailable","handleCheckboxChange","checked","prev","handleTimeChange","timeType","value","handleIconClick","_schedule$day","key","inputRef","dayIsAvailable","click","error","console","focus","log","handleSubmit","e","preventDefault","token","localStorage","getItem","alert","response","fetch","method","headers","body","result","json","ok","Error","status","message","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","map","_schedule$day2","_schedule$day3","_schedule$day4","_schedule$day5","_schedule$day6","_schedule$day7","_schedule$day8","_schedule$day9","type","id","onChange","target","htmlFor","disabled","required","ref","_c","$RefreshReg$"],"sources":["C:/Users/vatsl/OneDrive/Desktop/CAS - Copy/cas-frontend/src/components/AvailabilityModal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'; // Import useRef\r\nimport { FaClock } from 'react-icons/fa'; // Import the clock icon\r\nimport '../styles/modal.css';\r\nimport '../styles/availability.css'; // Ensure this is imported\r\n\r\nconst daysOfWeek = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n\r\nfunction AvailabilityModal({ isOpen, currentAvailability, onUpdate, onClose }) {\r\n  const [schedule, setSchedule] = useState({});\r\n  const timeInputRefs = useRef({}); // Ref to hold refs for all time inputs\r\n\r\n  // Initialize local state when the modal opens or availability data changes\r\n  useEffect(() => {\r\n    if (currentAvailability) {\r\n      // Initialize refs object when component mounts or isOpen changes\r\n      timeInputRefs.current = {};\r\n      daysOfWeek.forEach(day => {\r\n        timeInputRefs.current[`start-${day}`] = React.createRef();\r\n        timeInputRefs.current[`end-${day}`] = React.createRef();\r\n      });\r\n\r\n      if (currentAvailability) {\r\n        setSchedule(JSON.parse(JSON.stringify(currentAvailability))); // Deep copy\r\n      } else {\r\n         // Ensure schedule is initialized if currentAvailability is null/undefined initially\r\n         const initialSchedule = {};\r\n         daysOfWeek.forEach(day => {\r\n            initialSchedule[day] = { startTime: '', endTime: '', isAvailable: false };\r\n         });\r\n         setSchedule(initialSchedule);\r\n      }\r\n    }\r\n  }, [currentAvailability, isOpen]); // Re-initialize if the prop changes while open or modal opens\r\n\r\n  const handleCheckboxChange = (day, checked) => {\r\n    setSchedule(prev => ({\r\n      ...prev,\r\n      [day]: { ...prev[day], isAvailable: checked }\r\n    }));\r\n  };\r\n\r\n  const handleTimeChange = (day, timeType, value) => {\r\n    setSchedule(prev => ({\r\n      ...prev,\r\n      [day]: { ...prev[day], [timeType]: value }\r\n    }));\r\n  };\r\n\r\n  // Function to trigger the time picker\r\n  const handleIconClick = (day, timeType) => {\r\n    const key = `${timeType}-${day}`;\r\n    const inputRef = timeInputRefs.current[key];\r\n    // Check if the day is available in the current schedule state\r\n    const dayIsAvailable = schedule[day]?.isAvailable || false;\r\n\r\n    if (dayIsAvailable && inputRef && inputRef.current) {\r\n      // Only attempt to trigger click if the day is available (input is enabled)\r\n      try {\r\n        // Programmatically click the input element\r\n        inputRef.current.click();\r\n      } catch (error) {\r\n        console.error(\"Failed to programmatically click input:\", error);\r\n        // Fallback: focus the input as a last resort\r\n        inputRef.current.focus();\r\n      }\r\n    } else if (!dayIsAvailable) {\r\n      // Optional: Log or provide feedback that the picker can't be opened because the day is unavailable\r\n      console.log(`Time picker for ${day} (${timeType}) cannot be opened as the day is marked unavailable.`);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => { // Make async\r\n    e.preventDefault();\r\n    console.log(\"Attempting to save schedule from modal:\", schedule);\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      // Handle error - maybe show message in modal or rely on parent\r\n      console.error(\"Authentication token not found.\");\r\n      alert(\"Authentication error. Please log in again.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5001/api/doctors/me/availability', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(schedule) // Send the entire schedule object\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || `HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      // Call parent's onUpdate handler ONLY on successful API call\r\n      onUpdate(schedule); // Pass the updated schedule back to update parent state\r\n      // onClose(); // onUpdate now handles closing in parent\r\n\r\n      alert(result.message || \"Availability updated successfully!\"); // Give feedback\r\n\r\n    } catch (err) {\r\n      console.error(\"Error updating availability:\", err);\r\n      // TODO: Display error message within the modal\r\n      alert(`Error updating availability: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`modal-backdrop ${isOpen ? 'open' : ''}`}>\r\n      <div className=\"modal-container availability-modal-container\"> {/* Add specific class */}\r\n        <div className=\"modal-header\">\r\n          <h2>Set Weekly Availability</h2>\r\n          <button onClick={onClose} className=\"modal-close-btn\">&times;</button>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"modal-body availability-modal-body\">\r\n            {daysOfWeek.map(day => (\r\n              <div key={day} className=\"availability-day-row\">\r\n                <label className=\"day-label\">{day}</label>\r\n                <div className=\"day-controls\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id={`available-${day}`}\r\n                    checked={schedule[day]?.isAvailable || false}\r\n                    onChange={(e) => handleCheckboxChange(day, e.target.checked)}\r\n                    className=\"availability-checkbox\"\r\n                  />\r\n                  <label htmlFor={`available-${day}`} className=\"availability-toggle-label\">\r\n                    {schedule[day]?.isAvailable ? 'Available' : 'Unavailable'}\r\n                  </label>\r\n                  <div className=\"time-inputs\">\r\n                    <div className=\"time-input-wrapper\">\r\n                      <input\r\n                        type=\"time\"\r\n                        id={`start-${day}`}\r\n                        value={schedule[day]?.startTime || ''}\r\n                        onChange={(e) => handleTimeChange(day, 'startTime', e.target.value)}\r\n                        disabled={!schedule[day]?.isAvailable}\r\n                        className=\"form-control time-input\"\r\n                        required={schedule[day]?.isAvailable} // Require time if available\r\n                        ref={timeInputRefs.current[`start-${day}`]} // Assign ref\r\n                      />\r\n                      {/* Use a div/span for click handling instead of label */}\r\n                      <span className=\"time-input-icon-clickable\" onClick={() => handleIconClick(day, 'start')}>\r\n                        <FaClock className=\"time-input-icon\" />\r\n                      </span>\r\n                    </div>\r\n                    <span> - </span>\r\n                    <div className=\"time-input-wrapper\">\r\n                      <input\r\n                        type=\"time\"\r\n                        id={`end-${day}`}\r\n                        value={schedule[day]?.endTime || ''}\r\n                        onChange={(e) => handleTimeChange(day, 'endTime', e.target.value)}\r\n                        disabled={!schedule[day]?.isAvailable}\r\n                        className=\"form-control time-input\"\r\n                        required={schedule[day]?.isAvailable} // Require time if available\r\n                        ref={timeInputRefs.current[`end-${day}`]} // Assign ref\r\n                      />\r\n                      {/* Use a div/span for click handling instead of label */}\r\n                       <span className=\"time-input-icon-clickable\" onClick={() => handleIconClick(day, 'end')}>\r\n                        <FaClock className=\"time-input-icon\" />\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              Save Availability\r\n            </button>\r\n            <button type=\"button\" onClick={onClose} className=\"btn btn-secondary\">\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AvailabilityModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}